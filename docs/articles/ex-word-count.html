<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word counts • rtrek</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Word counts">
<meta property="og:description" content="rtrek">
<meta property="og:image" content="https://leonawicz.github.io/rtrek/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rtrek</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/rtrek.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/stapi.html">Star Trek API (STAPI)</a>
    </li>
    <li>
      <a href="../articles/memory-alpha.html">Memory Alpha</a>
    </li>
    <li>
      <a href="../articles/memory-beta.html">Memory Beta</a>
    </li>
    <li>
      <a href="../articles/fonts.html">Star Trek fonts</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Examples</li>
    <li>
      <a href="../articles/ex-word-count.html">Novels: word count</a>
    </li>
    <li>
      <a href="../articles/ex-episode-analysis.html">Episodes: spoken lines</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/sc.html">Stellar Cartography</a>
</li>
<li>
  <a href="../articles/rr.html">R &amp; R... &amp; R</a>
</li>
<li>
  <a href="https://github.com/leonawicz/rtrek">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ex-word-count_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Word counts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/rtrek/blob/master/vignettes/ex-word-count.Rmd"><code>vignettes/ex-word-count.Rmd</code></a></small>
      <div class="hidden name"><code>ex-word-count.Rmd</code></div>

    </div>

    
    
<p>These examples explore the word counts of published Star Trek novels from 1967 through 2017 based on the <code>stBooks</code> dataset.</p>
<p>First, load packages to assist with data manipulation and plotting.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/slowkow/ggrepel">ggrepel</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leonawicz/rtrek">rtrek</a></span><span class="op">)</span> <span class="co"># use &gt;= v0.2.1 for more accurate word count data</span></code></pre></div>
<p>Look for trends in word count through time for select series: The Next Generation, Deep Space Nine, and Voyager. Mutating the <code>date</code> and <code>nword</code> columns facilitates a better plot. Retain outliers in general, but drop any titles containing the word “Omnibus” because these are known to be larger books containing multiple individual novels. Inspect the data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">keep_series</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TNG"</span>, <span class="st">"DS9"</span>, <span class="st">"VOY"</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">stBooks</span>, date <span class="op">=</span> <span class="fu"><a href="http://lubridate.tidyverse.org/reference/decimal_date.html">decimal_date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span>, nword <span class="op">=</span> <span class="va">nword</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">series</span> <span class="op">%in%</span> <span class="va">keep_series</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"Omnibus"</span>, <span class="va">title</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">nword</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 266 x 11</span>
<span class="co">#&gt;    title   author  date publisher identifier series subseries nchap nword  nchar</span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;  &lt;int&gt;</span>
<span class="co">#&gt;  1 Slings~ Terri~ 2008. Simon an~ 1416550240 TNG    &lt;NA&gt;          8  10.7  63356</span>
<span class="co">#&gt;  2 Slings~ Keith~ 2008. Simon an~ 978141655~ TNG    &lt;NA&gt;         11  18.9 112768</span>
<span class="co">#&gt;  3 First ~ John ~ 1997. Pocket B~ 978074345~ TNG    &lt;NA&gt;         13  23.6 137531</span>
<span class="co">#&gt;  4 Slings~ Willi~ 2008. Simon an~ 1416550224 TNG    &lt;NA&gt;          8  23.8 140719</span>
<span class="co">#&gt;  5 Typhon~ Chris~ 2012. Gallery ~ 978145165~ TNG    Typhon P~    14  25.3 149530</span>
<span class="co">#&gt;  6 Lust's~ Paula~ 2015. Pocket B~ 978147677~ DS9    &lt;NA&gt;         16  25.5 188622</span>
<span class="co">#&gt;  7 Slings~ Rober~ 2008. Simon an~ 978141655~ TNG    &lt;NA&gt;          7  25.8 153414</span>
<span class="co">#&gt;  8 Q are ~ Rudy ~ 2015. Pocket B~ 978147677~ TNG    &lt;NA&gt;         10  27.2 192705</span>
<span class="co">#&gt;  9 Slings~ J. St~ 2008. Pocket B~ 978141655~ TNG    &lt;NA&gt;         12  27.6 159115</span>
<span class="co">#&gt; 10 The St~ James~ 2013. Pocket B~ 978145169~ TNG    &lt;NA&gt;          5  29.2 212328</span>
<span class="co">#&gt; # ... with 256 more rows, and 1 more variable: dedication &lt;chr&gt;</span></code></pre></div>
<p>Create a plot, separating each series in a different panel rather than using color to differentiate them.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">clrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cornflowerblue"</span>, <span class="st">"orange"</span>, <span class="st">"purple"</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">nword</span>, color <span class="op">=</span> <span class="va">series</span>, fill <span class="op">=</span> <span class="va">series</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, shape <span class="op">=</span> <span class="fl">21</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Star Trek novel word count"</span>, subtitle <span class="op">=</span> <span class="st">"By publication date and selected series"</span>, 
       x <span class="op">=</span> <span class="st">"Publication date"</span>, y <span class="op">=</span> <span class="st">"Word count (Thousand words)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">clrs</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">clrs</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1987</span>, <span class="fl">2018</span>, by <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.5</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1987</span>, <span class="fl">2018</span>, by <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="ex-word-count_files/figure-html/ex1_plot-1.png" width="100%"></p>
<p>Look at the marginal change through time in average word count (pool all three series) with a simple linear model.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">nword</span> <span class="op">~</span> <span class="va">date</span>, data <span class="op">=</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Call:</span>
<span class="co">#&gt; lm(formula = nword ~ date, data = x)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residuals:</span>
<span class="co">#&gt;     Min      1Q  Median      3Q     Max </span>
<span class="co">#&gt; -73.630 -13.805  -3.222  10.338 121.988 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Coefficients:</span>
<span class="co">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span>
<span class="co">#&gt; (Intercept) -1705.3048   446.1422  -3.822 0.000165 ***</span>
<span class="co">#&gt; date            0.8912     0.2229   3.998  8.3e-05 ***</span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Residual standard error: 27.17 on 264 degrees of freedom</span>
<span class="co">#&gt; Multiple R-squared:  0.05709,    Adjusted R-squared:  0.05352 </span>
<span class="co">#&gt; F-statistic: 15.98 on 1 and 264 DF,  p-value: 8.298e-05</span></code></pre></div>
<p>There is about a 40% increase in average word count per novel across the three series from the the first TNG novel in 1987 through 2017. In the case of the Voyager novels, however, the average word count approximately doubles and does so over a short production run. It is worth noting that as word count has trended upward noticeably, novels from these series have also been published less frequently. If you have read many of these book in paperback form, both the oldest and the more recent ones, this should not be a surprising result. Many of the newer releases have notably more pages and smaller font than the novels from the earlier years.</p>
<p>In this next example, consider all books from all series available in <code>stBooks</code>, with the exception of Omnibus editions and those falling into the reference category. This example looks at cumulative total word count over time for all the selected books. For plot labeling purposes, this time divide the word count by one million.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">stBooks</span>, date <span class="op">=</span> <span class="fu"><a href="http://lubridate.tidyverse.org/reference/decimal_date.html">decimal_date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span>, nword <span class="op">=</span> <span class="va">nword</span> <span class="op">/</span> <span class="fl">1e6</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">series</span> <span class="op">!=</span> <span class="st">"REF"</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"Omnibus"</span>, <span class="va">title</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>total_words <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">nword</span><span class="op">)</span><span class="op">)</span>

<span class="va">x</span>
<span class="co">#&gt; # A tibble: 732 x 12</span>
<span class="co">#&gt;    title  author  date publisher identifier series subseries nchap  nword  nchar</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;  &lt;int&gt;</span>
<span class="co">#&gt;  1 Banta~ James~ 1967  Amereon ~ 978084880~ TOS    &lt;NA&gt;         NA 0.0411 235524</span>
<span class="co">#&gt;  2 Banta~ James~ 1968. Amereon ~ 978084880~ TOS    &lt;NA&gt;         NA 0.0405 232094</span>
<span class="co">#&gt;  3 Banta~ James~ 1969. Bantam B~ 978055312~ TOS    &lt;NA&gt;         NA 0.0389 224369</span>
<span class="co">#&gt;  4 Banta~ James~ 1970. Bantam B~ 978055310~ TOS    &lt;NA&gt;          9 0.0361 207001</span>
<span class="co">#&gt;  5 Banta~ James~ 1971. Bantam B~ 978055312~ TOS    &lt;NA&gt;         NA 0.0416 239859</span>
<span class="co">#&gt;  6 Banta~ James~ 1972. Bantam B~ 978055314~ TOS    &lt;NA&gt;         NA 0.0430 247985</span>
<span class="co">#&gt;  7 Banta~ James~ 1972. Bantam B~ 978055313~ TOS    &lt;NA&gt;         NA 0.0428 248923</span>
<span class="co">#&gt;  8 Banta~ James~ 1972. Bantam B~ 978055313~ TOS    &lt;NA&gt;         NA 0.0464 268309</span>
<span class="co">#&gt;  9 Banta~ James~ 1973. Bantam B~ 978055312~ TOS    &lt;NA&gt;         NA 0.0533 307648</span>
<span class="co">#&gt; 10 Banta~ James~ 1974. Bantam B~ 978055312~ TOS    &lt;NA&gt;         NA 0.0533 314575</span>
<span class="co">#&gt; # ... with 722 more rows, and 2 more variables: dedication &lt;chr&gt;,</span>
<span class="co">#&gt; #   total_words &lt;dbl&gt;</span></code></pre></div>
<p>The plot will be labeled with series abbreviations, so a key is needed for clarity. In order to label points on the plot marking the onset of a new novel series, take the first entry in the data frame for each series. A bit of theme customization is required for the table grid object that will display the key as an inset figure.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tab_theme</span> <span class="op">&lt;-</span> <span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html">ttheme_default</a></span><span class="op">(</span>
  core <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fg_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>, padding <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"mm"</span><span class="op">)</span><span class="op">)</span>, 
  colhead <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fg_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">series</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">series</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">stSeries</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"series"</span> <span class="op">=</span> <span class="st">"abb"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">series</span>, <span class="va">id</span>, <span class="va">date</span>, <span class="va">total_words</span><span class="op">)</span>

<span class="va">series</span>
<span class="co">#&gt; # A tibble: 20 x 4</span>
<span class="co">#&gt;    series id                                        date total_words</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;                                    &lt;dbl&gt;       &lt;dbl&gt;</span>
<span class="co">#&gt;  1 AV     Abramsverse                              2009.     41.4   </span>
<span class="co">#&gt;  2 CT     Tales from the Captain's Table Anthology 1998.     17.4   </span>
<span class="co">#&gt;  3 DS9    Deep Space Nine                          1993.      8.97  </span>
<span class="co">#&gt;  4 DSC    Discovery                                2018.     52.1   </span>
<span class="co">#&gt;  5 ENT    Enterprise                               2002.     24.5   </span>
<span class="co">#&gt;  6 KE     Klingon Empire                           2004.     30.1   </span>
<span class="co">#&gt;  7 MISC   Miscellaneous                            1995.     11.7   </span>
<span class="co">#&gt;  8 NF     New Frontier                             1997.     15.7   </span>
<span class="co">#&gt;  9 SCE    Starfleet Corps of Engineers             2001.     22.2   </span>
<span class="co">#&gt; 10 SGZ    Stargazer                                2002.     25.6   </span>
<span class="co">#&gt; 11 SKR    Seekers                                  2015.     48.1   </span>
<span class="co">#&gt; 12 SNW    Strange New Worlds Anthology             1998.     17.5   </span>
<span class="co">#&gt; 13 ST     All-Series/Crossover                     2000.     20.6   </span>
<span class="co">#&gt; 14 SV     Shatnerverse                             1998.     17.2   </span>
<span class="co">#&gt; 15 TLE    The Lost Era                             2004.     28.5   </span>
<span class="co">#&gt; 16 TNG    The Next Generation                      1988.      4.01  </span>
<span class="co">#&gt; 17 TOS    The Original Series                      1967       0.0411</span>
<span class="co">#&gt; 18 TTN    Titan                                    2005.     34.0   </span>
<span class="co">#&gt; 19 VAN    Vanguard                                 2006.     34.7   </span>
<span class="co">#&gt; 20 VOY    Voyager                                  1996.     13.2</span>

<span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="va">series</span>, <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>series <span class="op">=</span> <span class="st">"YA-"</span>, id <span class="op">=</span> <span class="st">"Young adult books"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">" Anthology"</span>, <span class="st">""</span>, <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Label"</span>, <span class="st">"Onset of book series"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html">tableGrob</a></span><span class="op">(</span>rows <span class="op">=</span> <span class="cn">NULL</span>, theme <span class="op">=</span> <span class="va">tab_theme</span><span class="op">)</span></code></pre></div>
<p>Finally, create the plot.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">brks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1967</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">2015</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="fl">2018</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">total_words</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_step</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"gray30"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">series</span>, shape <span class="op">=</span> <span class="fl">21</span>, fill <span class="op">=</span> <span class="st">"#FF3030"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html">geom_label_repel</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">series</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">series</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"white"</span>, fill <span class="op">=</span> <span class="st">"#FF3030CC"</span>, 
                   segment.color <span class="op">=</span> <span class="st">"black"</span>, fontface <span class="op">=</span> <span class="st">"bold"</span>, label.size <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Star Trek novel cumulative word count"</span>, 
       subtitle <span class="op">=</span> <span class="st">"By publication date, excluding reference and omnibus titles"</span>, 
       x <span class="op">=</span> <span class="st">"Publication date"</span>, 
       y <span class="op">=</span> <span class="st">"Cumulative word count (Million words)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="va">brks</span> <span class="op">+</span> <span class="fl">0.5</span>, labels <span class="op">=</span> <span class="va">brks</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1966.5</span>, <span class="fl">2019</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotation_custom.html">annotation_custom</a></span><span class="op">(</span><span class="va">key</span>, xmin <span class="op">=</span> <span class="fl">2007</span>, ymax <span class="op">=</span> <span class="fl">35</span><span class="op">)</span></code></pre></div>
<p><img src="ex-word-count_files/figure-html/ex2_plot-1.png" width="100%"></p>
<p>The golden age of licensed Star Trek novel publishing is clear. The 1990s and 2000s saw the creation of many new series as well of regular publication of new novels from existing ones. The current trajectory appears similar to the early 1990s, at least in terms of total words written.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/leonawicz">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
