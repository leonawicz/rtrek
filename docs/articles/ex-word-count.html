<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word counts • rtrek</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Word counts">
<meta property="og:description" content="rtrek">
<meta property="og:image" content="https://leonawicz.github.io/rtrek/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rtrek</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/rtrek.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/stapi.html">Star Trek API (STAPI)</a>
    </li>
    <li>
      <a href="../articles/memory-alpha.html">Memory Alpha</a>
    </li>
    <li>
      <a href="../articles/memory-beta.html">Memory Beta</a>
    </li>
    <li>
      <a href="../articles/fonts.html">Star Trek fonts</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Examples</li>
    <li>
      <a href="../articles/ex-word-count.html">Novels: word count</a>
    </li>
    <li>
      <a href="../articles/ex-episode-analysis.html">Episodes: spoken lines</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/sc.html">Stellar Cartography</a>
</li>
<li>
  <a href="https://github.com/leonawicz/rtrek" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Word counts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/rtrek/blob/HEAD/vignettes/ex-word-count.Rmd" class="external-link"><code>vignettes/ex-word-count.Rmd</code></a></small>
      <div class="hidden name"><code>ex-word-count.Rmd</code></div>

    </div>

    
    
<p>These examples explore the word counts of published Star Trek novels
from 1967 through 2017 based on the <code>stBooks</code> dataset.</p>
<p>First, load packages to assist with data manipulation and
plotting.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/slowkow/ggrepel" class="external-link">ggrepel</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leonawicz/rtrek" class="external-link">rtrek</a></span><span class="op">)</span> <span class="co"># use &gt;= v0.2.1 for more accurate word count data</span></span></code></pre></div>
<p>Look for trends in word count through time for select series: The
Next Generation, Deep Space Nine, and Voyager. Mutating the
<code>date</code> and <code>nword</code> columns facilitates a better
plot. Retain outliers in general, but drop any titles containing the
word “Omnibus” because these are known to be larger books containing
multiple individual novels. Inspect the data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">keep_series</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TNG"</span>, <span class="st">"DS9"</span>, <span class="st">"VOY"</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">stBooks</span>, date <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/decimal_date.html" class="external-link">decimal_date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span>, nword <span class="op">=</span> <span class="va">nword</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">series</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">keep_series</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Omnibus"</span>, <span class="va">title</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">nword</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 266 × 11</span></span></span>
<span><span class="co">#&gt;    title   author  date publisher identifier series subseries nchap nword  nchar</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Slings… Terri… <span style="text-decoration: underline;">2</span>008. Simon an… 1416550240 TNG    <span style="color: #BB0000;">NA</span>            8  10.7  <span style="text-decoration: underline;">63</span>356</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Slings… Keith… <span style="text-decoration: underline;">2</span>008. Simon an… 978141655… TNG    <span style="color: #BB0000;">NA</span>           11  18.9 <span style="text-decoration: underline;">112</span>768</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> First … John … <span style="text-decoration: underline;">1</span>997. Pocket B… 978074345… TNG    <span style="color: #BB0000;">NA</span>           13  23.6 <span style="text-decoration: underline;">137</span>531</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Slings… Willi… <span style="text-decoration: underline;">2</span>008. Simon an… 1416550224 TNG    <span style="color: #BB0000;">NA</span>            8  23.8 <span style="text-decoration: underline;">140</span>719</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Typhon… Chris… <span style="text-decoration: underline;">2</span>012. Gallery … 978145165… TNG    Typhon P…    14  25.3 <span style="text-decoration: underline;">149</span>530</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Lust's… Paula… <span style="text-decoration: underline;">2</span>015. Pocket B… 978147677… DS9    <span style="color: #BB0000;">NA</span>           16  25.5 <span style="text-decoration: underline;">188</span>622</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Slings… Rober… <span style="text-decoration: underline;">2</span>008. Simon an… 978141655… TNG    <span style="color: #BB0000;">NA</span>            7  25.8 <span style="text-decoration: underline;">153</span>414</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Q are … Rudy … <span style="text-decoration: underline;">2</span>015. Pocket B… 978147677… TNG    <span style="color: #BB0000;">NA</span>           10  27.2 <span style="text-decoration: underline;">192</span>705</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Slings… J. St… <span style="text-decoration: underline;">2</span>008. Pocket B… 978141655… TNG    <span style="color: #BB0000;">NA</span>           12  27.6 <span style="text-decoration: underline;">159</span>115</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> The St… James… <span style="text-decoration: underline;">2</span>013. Pocket B… 978145169… TNG    <span style="color: #BB0000;">NA</span>            5  29.2 <span style="text-decoration: underline;">212</span>328</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 256 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: dedication &lt;chr&gt;</span></span></span></code></pre></div>
<p>Create a plot, separating each series in a different panel rather
than using color to differentiate them.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cornflowerblue"</span>, <span class="st">"orange"</span>, <span class="st">"purple"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">nword</span>, color <span class="op">=</span> <span class="va">series</span>, fill <span class="op">=</span> <span class="va">series</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, shape <span class="op">=</span> <span class="fl">21</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Star Trek novel word count"</span>, subtitle <span class="op">=</span> <span class="st">"By publication date and selected series"</span>, </span>
<span>       x <span class="op">=</span> <span class="st">"Publication date"</span>, y <span class="op">=</span> <span class="st">"Word count (Thousand words)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">clrs</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">clrs</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1987</span>, <span class="fl">2018</span>, by <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.5</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1987</span>, <span class="fl">2018</span>, by <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex-word-count_files/figure-html/ex1_plot-1.png" width="100%"></p>
<p>Look at the marginal change through time in average word count (pool
all three series) with a simple linear model.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">nword</span> <span class="op">~</span> <span class="va">date</span>, data <span class="op">=</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; lm(formula = nword ~ date, data = x)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residuals:</span></span>
<span><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span><span class="co">#&gt; -73.630 -13.805  -3.222  10.338 121.988 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">#&gt; (Intercept) -1705.3048   446.1422  -3.822 0.000165 ***</span></span>
<span><span class="co">#&gt; date            0.8912     0.2229   3.998  8.3e-05 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual standard error: 27.17 on 264 degrees of freedom</span></span>
<span><span class="co">#&gt; Multiple R-squared:  0.05709,    Adjusted R-squared:  0.05352 </span></span>
<span><span class="co">#&gt; F-statistic: 15.98 on 1 and 264 DF,  p-value: 8.298e-05</span></span></code></pre></div>
<p>There is about a 40% increase in average word count per novel across
the three series from the the first TNG novel in 1987 through 2017. In
the case of the Voyager novels, however, the average word count
approximately doubles and does so over a short production run. It is
worth noting that as word count has trended upward noticeably, novels
from these series have also been published less frequently. If you have
read many of these book in paperback form, both the oldest and the more
recent ones, this should not be a surprising result. Many of the newer
releases have notably more pages and smaller font than the novels from
the earlier years.</p>
<p>In this next example, consider all books from all series available in
<code>stBooks</code>, with the exception of Omnibus editions and those
falling into the reference category. This example looks at cumulative
total word count over time for all the selected books. For plot labeling
purposes, this time divide the word count by one million.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">stBooks</span>, date <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/decimal_date.html" class="external-link">decimal_date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span>, nword <span class="op">=</span> <span class="va">nword</span> <span class="op">/</span> <span class="fl">1e6</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">series</span> <span class="op">!=</span> <span class="st">"REF"</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Omnibus"</span>, <span class="va">title</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>total_words <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">nword</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 732 × 12</span></span></span>
<span><span class="co">#&gt;    title  author  date publisher identifier series subseries nchap  nword  nchar</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Banta… James… <span style="text-decoration: underline;">1</span>967  Amereon … 978084880… TOS    <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> 0.041<span style="text-decoration: underline;">1</span> <span style="text-decoration: underline;">235</span>524</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Banta… James… <span style="text-decoration: underline;">1</span>968. Amereon … 978084880… TOS    <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> 0.040<span style="text-decoration: underline;">5</span> <span style="text-decoration: underline;">232</span>094</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Banta… James… <span style="text-decoration: underline;">1</span>969. Bantam B… 978055312… TOS    <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> 0.038<span style="text-decoration: underline;">9</span> <span style="text-decoration: underline;">224</span>369</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Banta… James… <span style="text-decoration: underline;">1</span>970. Bantam B… 978055310… TOS    <span style="color: #BB0000;">NA</span>            9 0.036<span style="text-decoration: underline;">1</span> <span style="text-decoration: underline;">207</span>001</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Banta… James… <span style="text-decoration: underline;">1</span>971. Bantam B… 978055312… TOS    <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> 0.041<span style="text-decoration: underline;">6</span> <span style="text-decoration: underline;">239</span>859</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Banta… James… <span style="text-decoration: underline;">1</span>972. Bantam B… 978055314… TOS    <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> 0.043<span style="text-decoration: underline;">0</span> <span style="text-decoration: underline;">247</span>985</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Banta… James… <span style="text-decoration: underline;">1</span>972. Bantam B… 978055313… TOS    <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> 0.042<span style="text-decoration: underline;">8</span> <span style="text-decoration: underline;">248</span>923</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Banta… James… <span style="text-decoration: underline;">1</span>972. Bantam B… 978055313… TOS    <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> 0.046<span style="text-decoration: underline;">4</span> <span style="text-decoration: underline;">268</span>309</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Banta… James… <span style="text-decoration: underline;">1</span>973. Bantam B… 978055312… TOS    <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> 0.053<span style="text-decoration: underline;">3</span> <span style="text-decoration: underline;">307</span>648</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Banta… James… <span style="text-decoration: underline;">1</span>974. Bantam B… 978055312… TOS    <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span> 0.053<span style="text-decoration: underline;">3</span> <span style="text-decoration: underline;">314</span>575</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 722 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: dedication &lt;chr&gt;, total_words &lt;dbl&gt;</span></span></span></code></pre></div>
<p>The plot will be labeled with series abbreviations, so a key is
needed for clarity. In order to label points on the plot marking the
onset of a new novel series, take the first entry in the data frame for
each series. A bit of theme customization is required for the table grid
object that will display the key as an inset figure.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tab_theme</span> <span class="op">&lt;-</span> <span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">ttheme_default</a></span><span class="op">(</span></span>
<span>  core <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fg_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>, padding <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="st">"mm"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  colhead <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>fg_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">series</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">series</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">stSeries</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"series"</span> <span class="op">=</span> <span class="st">"abb"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">series</span>, <span class="va">id</span>, <span class="va">date</span>, <span class="va">total_words</span><span class="op">)</span></span>
<span></span>
<span><span class="va">series</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 20 × 4</span></span></span>
<span><span class="co">#&gt;    series id                                        date total_words</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> AV     Abramsverse                              <span style="text-decoration: underline;">2</span>009.     41.4   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> CT     Tales from the Captain's Table Anthology <span style="text-decoration: underline;">1</span>998.     17.4   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> DS9    Deep Space Nine                          <span style="text-decoration: underline;">1</span>993.      8.97  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> DSC    Discovery                                <span style="text-decoration: underline;">2</span>018.     52.1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ENT    Enterprise                               <span style="text-decoration: underline;">2</span>002.     24.5   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> KE     Klingon Empire                           <span style="text-decoration: underline;">2</span>004.     30.1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> MISC   Miscellaneous                            <span style="text-decoration: underline;">1</span>995.     11.7   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> NF     New Frontier                             <span style="text-decoration: underline;">1</span>997.     15.7   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> SCE    Starfleet Corps of Engineers             <span style="text-decoration: underline;">2</span>001.     22.2   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> SGZ    Stargazer                                <span style="text-decoration: underline;">2</span>002.     25.6   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> SKR    Seekers                                  <span style="text-decoration: underline;">2</span>015.     48.1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> SNW    Strange New Worlds Anthology             <span style="text-decoration: underline;">1</span>998.     17.5   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> ST     All-Series/Crossover                     <span style="text-decoration: underline;">2</span>000.     20.6   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> SV     Shatnerverse                             <span style="text-decoration: underline;">1</span>998.     17.2   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> TLE    The Lost Era                             <span style="text-decoration: underline;">2</span>004.     28.5   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> TNG    The Next Generation                      <span style="text-decoration: underline;">1</span>988.      4.01  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> TOS    The Original Series                      <span style="text-decoration: underline;">1</span>967       0.041<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> TTN    Titan                                    <span style="text-decoration: underline;">2</span>005.     34.0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> VAN    Vanguard                                 <span style="text-decoration: underline;">2</span>006.     34.7   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span> VOY    Voyager                                  <span style="text-decoration: underline;">1</span>996.     13.2</span></span>
<span></span>
<span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">series</span>, <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>series <span class="op">=</span> <span class="st">"YA-"</span>, id <span class="op">=</span> <span class="st">"Young adult books"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">" Anthology"</span>, <span class="st">""</span>, <span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Label"</span>, <span class="st">"Onset of book series"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html" class="external-link">tableGrob</a></span><span class="op">(</span>rows <span class="op">=</span> <span class="cn">NULL</span>, theme <span class="op">=</span> <span class="va">tab_theme</span><span class="op">)</span></span></code></pre></div>
<p>Finally, create the plot.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">brks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1967</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1970</span>, <span class="fl">2015</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, <span class="fl">2018</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">total_words</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_step</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"gray30"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">series</span>, shape <span class="op">=</span> <span class="fl">21</span>, fill <span class="op">=</span> <span class="st">"#FF3030"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html" class="external-link">geom_label_repel</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">series</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">series</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"white"</span>, fill <span class="op">=</span> <span class="st">"#FF3030CC"</span>, </span>
<span>                   segment.color <span class="op">=</span> <span class="st">"black"</span>, fontface <span class="op">=</span> <span class="st">"bold"</span>, label.size <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Star Trek novel cumulative word count"</span>, </span>
<span>       subtitle <span class="op">=</span> <span class="st">"By publication date, excluding reference and omnibus titles"</span>, </span>
<span>       x <span class="op">=</span> <span class="st">"Publication date"</span>, </span>
<span>       y <span class="op">=</span> <span class="st">"Cumulative word count (Million words)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="va">brks</span> <span class="op">+</span> <span class="fl">0.5</span>, labels <span class="op">=</span> <span class="va">brks</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1966.5</span>, <span class="fl">2019</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotation_custom.html" class="external-link">annotation_custom</a></span><span class="op">(</span><span class="va">key</span>, xmin <span class="op">=</span> <span class="fl">2007</span>, ymax <span class="op">=</span> <span class="fl">35</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex-word-count_files/figure-html/ex2_plot-1.png" width="100%"></p>
<p>The golden age of licensed Star Trek novel publishing is clear. The
1990s and 2000s saw the creation of many new series as well of regular
publication of new novels from existing ones. The current trajectory
appears similar to the early 1990s, at least in terms of total words
written. Data up to date only through 2017.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://github.com/leonawicz" class="external-link">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
